#!/usr/bin/env bash

function dp_monitor_num() {
  local num=`xrandr | grep -oP 'DP\-[01](?=\sconnected)'`
  echo $num
}

# work setup has three monitors
#                              +----------+
#  +-----------------+         |          |
#  |                 |         |          |     +----------------------+
#  |                 |         |          |     |                      |
#  |     DP-2        |         |          |     |                      |
#  |                 |         |  DP-0/1  |     |        HDMI-0        |
#  |                 |         |          |     |                      |
#  +-----------------+         |          |     |                      |
#  \    qwertyuiop    \        |          |     +----------------------+
#   \    asdfghjkl;    \       |          |
#    \    zxcvbnm,.     \      +----------+
#     \__________________\

function work_setup() {
  local dp_monitor=`dp_monitor_num`
  xrandr --output DP-2 --primary
  xrandr --output "$dp_monitor" --rotate right
  xrandr --output "$dp_monitor" --right-of DP-2
  xrandr --output HDMI-0 --right-of "$dp_monitor"
}

# test if work
is_work() {
  local var=$1
  [[ $var == "work" ]]
}

is_solo() {
  local var=$1
  [[ $var == "solo" ]]
}

set_background() {
  /home/aaron/bin/set_background
}

# Main function
main() {

  if is_work "$1"; then
    work_setup
  elif is_solo "$1"; then
    exit 1
  else
    echo "unknown mode: $1\ntry \"work\" or \"home\""
  fi

  set_background

}

main "$*"
